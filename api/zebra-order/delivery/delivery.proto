/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

syntax = "proto3";

package delivery;

option go_package = "./api/zebra-order/delivery;delivery";

// 订单发货信息
message Delivery {
  int64  delivery_id       = 1;  // 发货ID
  int64  order_id          = 2;  // 订单ID
  string order_no         = 3;  // 订单号
  string delivery_no      = 4;  // 物流单号
  string delivery_comp    = 5;  // 物流公司
  int32  delivery_status  = 6;  // 发货状态: 0=运输中, 1=已签收, 2=异常
  int64  create_time      = 7;
  int64  update_time      = 8;
  int32  is_deleted       = 9;
}

// 创建发货请求
message CreateDeliveryRequest {
  string order_no      = 1;  // 订单号
  string delivery_no   = 2;  // 物流单号
  string delivery_comp = 3;  // 物流公司
}

// 创建发货响应
message CreateDeliveryResponse {
  Delivery delivery = 1;
  string   message  = 2;
}

// 更新发货状态请求
message UpdateDeliveryStatusRequest {
  string order_no       = 1;  // 订单号
  int32  delivery_status = 2;  // 发货状态
}

// 查询发货信息请求
message GetDeliveryRequest {
  oneof query {
    string order_no    = 1;
    string delivery_no = 2;
    int64  delivery_id = 3;
  }
}

// 查询发货信息响应
message GetDeliveryResponse {
  Delivery delivery = 1;
}

// 发货服务
service DeliveryService {
  rpc CreateDelivery(CreateDeliveryRequest) returns (CreateDeliveryResponse);
  rpc UpdateDeliveryStatus(UpdateDeliveryStatusRequest) returns (CreateDeliveryResponse);
  rpc GetDelivery(GetDeliveryRequest) returns (GetDeliveryResponse);
}