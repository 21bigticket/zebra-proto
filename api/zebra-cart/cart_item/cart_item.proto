/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

syntax = "proto3";
package cart_item;
option go_package = "./github.com/21bigticket/zebra-proto/api/zebra-cart/cart_item;cart_item";

// 购物车商品
message CartItem {
  int64  item_id     = 1;
  int64  cart_id     = 2;
  int64  user_id     = 3;
  int64  sku_id      = 4;
  string sku_name    = 5;
  string sku_image   = 6;
  int64  price       = 7;   // 单价（分）
  int32  quantity    = 8;   // 数量
  int64  create_time = 9;
  int64  update_time = 10;
  int32  is_deleted  = 11;
}

// 创建购物车商品请求
message CreateCartItemRequest {
  int64  cart_id    = 1;
  int64  user_id    = 2;
  int64  sku_id     = 3;
  string sku_name   = 4;
  string sku_image  = 5;
  int64  price      = 6;
  int32  quantity   = 7;
}

// 更新购物车商品请求
message UpdateCartItemRequest {
  int64  item_id    = 1;
  int64  sku_id     = 2;
  string sku_name   = 4;
  string sku_image  = 5;
  int64  price      = 6;
  int32  quantity   = 7;
}

// 删除购物车商品请求
message DeleteCartItemRequest {
  int64 item_id = 1;
}

// 获取购物车商品请求
message GetCartItemRequest {
  int64 item_id = 1;
}

// 获取购物车商品响应
message GetCartItemResponse {
  CartItem cart_item = 1;
}

// 查询购物车商品列表请求
message ListCartItemRequest {
  int32  page      = 1;
  int32  page_size = 2;
  int64  cart_id   = 3;
  int64  user_id   = 4;
  int64  sku_id    = 5;
}

// 查询购物车商品列表响应
message ListCartItemResponse {
  repeated CartItem cart_items = 1;
  int32           total       = 2;
}

// 按用户查询购物车商品请求
message GetUserItemsRequest {
  int64 user_id    = 1;
  int32 page       = 2;
  int32 page_size  = 3;
}

// 按购物车查询商品请求
message GetCartItemsRequest {
  int64 cart_id    = 1;
  int32 page       = 2;
  int32 page_size  = 3;
}

// 更新数量请求
message UpdateQuantityRequest {
  int64 item_id  = 1;
  int32 quantity = 2;
}

// 批量删除请求
message BatchDeleteRequest {
  repeated int64 item_ids = 1;
}

// 清空购物车请求
message ClearCartItemsRequest {
  int64 cart_id = 1;
}

// 购物车商品服务
service CartItemService {
  // 创建购物车商品
  rpc Create(CreateCartItemRequest) returns (CartItem);
  // 更新购物车商品
  rpc Update(UpdateCartItemRequest) returns (CartItem);
  // 删除购物车商品
  rpc Delete(DeleteCartItemRequest) returns (CartItem);
  // 获取购物车商品
  rpc Get(GetCartItemRequest) returns (GetCartItemResponse);
  // 查询购物车商品列表
  rpc List(ListCartItemRequest) returns (ListCartItemResponse);
  // 获取用户的购物车商品
  rpc GetUserItems(GetUserItemsRequest) returns (ListCartItemResponse);
  // 获取购物车的商品列表
  rpc GetCartItems(GetCartItemsRequest) returns (ListCartItemResponse);
  // 更新商品数量
  rpc UpdateQuantity(UpdateQuantityRequest) returns (CartItem);
  // 批量删除商品
  rpc BatchDelete(BatchDeleteRequest) returns (ListCartItemResponse);
  // 清空购物车商品
  rpc ClearCartItems(ClearCartItemsRequest) returns (ListCartItemResponse);
}
